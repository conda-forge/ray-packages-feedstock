From 8dc72e982ed78695816fce0bfbfd835084466307 Mon Sep 17 00:00:00 2001
From: Matti Picus <matti.picus@gmail.com>
Date: Fri, 29 Aug 2025 01:08:54 +0300
Subject: [PATCH] update patch for grpc 1.67

---
 .../patches/grpc-configurable-thread-count.patch      | 11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

diff --git a/thirdparty/patches/grpc-configurable-thread-count.patch b/thirdparty/patches/grpc-configurable-thread-count.patch
index 26387f51a5..f1ae73ec4a 100644
--- a/thirdparty/patches/grpc-configurable-thread-count.patch
+++ b/thirdparty/patches/grpc-configurable-thread-count.patch
@@ -1,7 +1,6 @@
-diff --git src/core/lib/gpr/linux/cpu.cc b/src/core/lib/gpr/linux/cpu.cc
-index 670ca6551c..043021dc4a 100644
---- src/core/lib/gpr/linux/cpu.cc
-+++ src/core/lib/gpr/linux/cpu.cc
+diff --git src/core/util/linux/cpu.cc src/core/util/linux/cpu.cc
+--- src/core/util/linux/cpu.cc
++++ src/core/util/linux/cpu.cc
 @@ -24,6 +24,7 @@
  
  #ifdef GPR_CPU_LINUX
@@ -10,7 +9,7 @@ index 670ca6551c..043021dc4a 100644
  #include <errno.h>
  #include <sched.h>
  #include <string.h>
-@@ -49,7 +50,17 @@ static void init_num_cpus() {
+@@ -50,7 +51,17 @@ static void init_num_cpus() {
  #endif
    // This must be signed. sysconf returns -1 when the number cannot be
    // determined
@@ -27,5 +26,5 @@ index 670ca6551c..043021dc4a 100644
 +      ncpus = static_cast<int>(sysconf(_SC_NPROCESSORS_CONF));
 +  }
    if (ncpus < 1) {
-     gpr_log(GPR_ERROR, "Cannot determine number of CPUs: assuming 1");
+     LOG(ERROR) << "Cannot determine number of CPUs: assuming 1";
      ncpus = 1;
-- 
2.39.5 (Apple Git-154)

